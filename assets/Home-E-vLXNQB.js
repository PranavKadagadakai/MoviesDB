import{r as o,j as e}from"./index-CrUSDf9u.js";import{M as v}from"./MovieCard-Nb4PXw57.js";const d="25fcd696a8e8f7d08a60cfc6a157c94e",h="https://api.themoviedb.org/3",y=async()=>{try{const r=await fetch(`${h}/movie/popular?api_key=${d}`);if(!r.ok)throw new Error("Failed to fetch popular movies");return(await r.json()).results}catch(r){return console.error(r),[]}},x=async r=>{try{const t=await fetch(`${h}/search/movie?api_key=${d}&query=${encodeURIComponent(r)}`);if(!t.ok)throw new Error("Failed to search movies");return(await t.json()).results}catch(t){return console.error(t),[]}};function w(){const[r,t]=o.useState(""),[n,l]=o.useState([]),[u,c]=o.useState(null),[m,i]=o.useState(!0);o.useEffect(()=>{(async()=>{try{const s=await y();l(s)}catch(s){console.log(s),c("Failed to load movies...")}finally{i(!1)}})()},[]);const f=async a=>{if(a.preventDefault(),!!r.trim()){i(!0);try{const s=await x(r);l(s),c(null)}catch(s){console.log(s),c("Failed to load movies...")}finally{i(!1)}}},p=()=>m?e.jsx("div",{className:"movies-grid-loading",children:[...Array(8)].map((a,s)=>e.jsx("div",{className:"loading-skeleton"},s))}):u?e.jsx("div",{className:"error-message",children:u}):n.length===0?e.jsx("div",{className:"no-results",children:"No movies found. Please try a different search."}):e.jsx("div",{className:"movies-grid",children:n.map(a=>e.jsx(v,{movie:a},a.id))});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"home",children:[e.jsxs("form",{className:"search-form",onSubmit:f,children:[e.jsx("input",{type:"text",placeholder:"Search for movies...",className:"search-input",value:r,onChange:a=>t(a.target.value)}),e.jsx("button",{type:"submit",className:"search-button","aria-label":"Search movies",children:"Search"})]}),p()]})})}export{w as default};
